# To Do

1. 凹口线发生点处上下5%若有其他凹口线，其他凹口线认为到此点时终止
2. 同凹口线实现倍量柱
3. 黄金线（默认长度1月）
4. 实现长阴短柱（急速下跌未破黄金线底，量能未到一半，低量急跌）
5. 压力线、支撑线

# 回测

考虑2018.4.1至2019.4.1之间的回测结果

## 买入信号

1. 前一天未持有条件下，若前一天收盘价低于凹口线而第二天开盘价高于算突破。（high>凹口线）
2. 往前找倍量柱画倍量柱底的线，直到凹口线的起始点
3. 倍量柱数量大于等于2买入，买入线为凹口线
4. 连3天因涨停未买入放弃买入

## 回撤

回撤大于1%卖出
1. 一字跌停，无法卖出，看第二天情况讨论
2. 开盘小于平仓线，开盘价卖
3. 其他情况触及平仓线（low<平仓线），平仓价卖

## check点设置

1. 上涨超过20%，每上涨20%设置check点，设置新平仓线为check点与买入点的中间价格
2. 当上涨超过50%，平仓线设置于3/4位点
3. 最低倍量柱底的线的 2倍/10倍 价格时减去 买入价的20%/买入价 向下设平仓线

取 1、2、3 最高的平仓线

## 手续费

每次交易按照0.1%扣除

# 日记

* 2019.03.08

>1. 完成整体架构
>2. 实现plotly可视化(candlesticks)
>3. 完成倍量柱
>4. 完成N天M次倍量

* 2019.03.15

>1. 完成阳胜柱(已不用)
>2. 完成将军柱、黄金柱
>3. 完成N天M次黄金

* 2019.03.22

>1. N天K线
>2. 汇出100支股片的2/3天K线csv

* 2019.03.23

>1. 实现OHLC(实现zoom in)
>2. 实现缩量群

* 2019.03.25

>1. 增加获取当天日期的函数
>2. 设置所有函数的默认参数值(日期设为当天)
>3. print_mode 默认为 False
>4. 函数参数传递多天 DataFrame 时以 list 打包
>5. 注释每一个函数的 input & output
>6. 将 DataFrame 的 index 改成股票代码，方便定位
>7. 修改诸多函数名称，优化诸多函数结构

* 2019.03.26

>1. 实现N天中满足条件的次数
>2. 打包获取前N天日期函数
>3. 取消 print 正在筛选...

* 2019.03.29

>1. 增加缩量群价判断：一天涨一个点，量一天少一个点
>2. 取消运行耗时的模块，可以改用 %time 代替
>3. 实现梯量群、平量群
>4. 显示涨跌幅百分比
>5. 实现新股判断：发行时间一个月内新股，三个月内次新股，新股（或次新股）不参与计算
>6. 实现量的分类：指标选择时期量在高低量之间

* 2019.03.30

>1. 实现凹口平衡线

* 2019.03.31

>1. 优化凹口平衡线（统一 label、颜色、完善长度接口）

* 2019.04.11

>1. 优化凹口平衡线接口
>2. Prettify code